# https://adventofcode.com/2024/day/7

# uiua 0.15.0-dev.1
# Experimental!

ğŸ—„ â† (
  âŠœâ–¡âŠ¸â‰ @\n
  â‰¡â—‡(â†˜â‚â™­â‚regex "(\\d*): (.*)")
  â‰¡âŠƒ(â–¡â—‡âŠœâ‹•âŠ¸â‰ @\sâŠ£|â‹•âŠ¢)
)

# permutations ? length chars
Permute â† â§…(1â—Œâ—Œ)
â”Œâ”€â•´ğŸ§ª
  â¤â¤™â‰ ["++" "+*" "*+" "**"] Permute 2 "+*"
â””â”€â•´

# ba ? a b
Join â† â‹•âŠ‚:âˆ©Â°â‹•
â”Œâ”€â•´ğŸ§ª
  â¤â¤™â‰ 3412 Join 12 34
â””â”€â•´

# res ? nums ops
TryPerm â† (
  Â°âŠ‚ # extract first num
  :âŠ™::
  âˆ§(â¨¬(Ã—|+|Join) âŠ—:"+*|")
)

# bool ? ops nums testvalue
EvalEquation â† /âˆ¨= â‰¡âŒTryPerm :Permute : âŠ™(-â‚âŠ¸â§»)

Solve! â† /+â–½ Â°âŠŸâ‰waitâ‰¡poolâœ:âŸœâ—‡(EvalEquation ^0 :)

ğŸª â† Solve!"+*" ğŸ—„
â”Œâ”€â•´ğŸ§ª
  â¤â¤™â‰ 3749 ğŸª &fras"example.txt"
  â¤â¤™â‰ 3119088655389 ğŸª &fras"input.txt"
â””â”€â•´

ğŸ« â† Solve!"+*|" ğŸ—„
â”Œâ”€â•´ğŸ§ª
  â¤â¤™â‰ 11387 ğŸ« &fras"example.txt"
  â¤â¤™â‰ 264184041398847 ğŸ« &fras"input.txt"
â””â”€â•´
