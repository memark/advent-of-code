# https://adventofcode.com/2024/day/12

# uiua 0.14.0-dev.7
# Experimental!

~ "../day-10/lib.ua" ~ ğŸ‘¨â€ğŸ’»â€¼
~ "../day-10/lib.ua" ~ ğŸ°
N â† âŠ‚âŸœÂ¯â‹¯1_2

# ğŸ˜ â† (
#   +âŠ¸[âˆ©Â¯,,â‡Œ.â‡¡2]Â¤
#   â–½âŠ¸â‰¡(ğŸ°:â–³Grid)
# )

# HeadsAndFeet â† â™­â‚‹â‚âŠâŠŸ:âŠƒ(âŠš=â‚‰|âŠš=â‚€)

# ğŸ“ â† â¤â¤™â‰âŠ™â–³

# # validNeighbors ? current
# ğŸ”œ â† (
#   âŠ¸ğŸ“[2]
#   âŠ¸ğŸ˜
#   âŠ™(+1âŠ¡:Grid)     # ta fram vÃ¤rdet+1
#   â–½:âŠ™=:âŠ¸â‰¡(âŠ¡:Grid) # kolla dess vÃ¤rden
# )

# Solve! â† /+^0 â‰¡(â§» ğŸ‘¨â€ğŸ’»â€¼ğŸ”œ â‰ Â°âŠŸâ‚‚) HeadsAndFeet

# ta fÃ¶rst fram regionerna
# starta pÃ¥ valfri A, se vilka Ã¶vriga A jag kan nÃ¥
# kanske genom dijkstra mellan alla par av A?
# eller genom rekursiv flood fill? det vore ju nyttigt eftersom jag aldrig gjort det innan.

# rÃ¤kna sen ut aria
# rÃ¤kna sen ut omkrets
# rÃ¤kna sen ut pris

# bool ? coordPair matrix
PathsBetweenCoordPair â† (
  Â°âŠŸ
  âŠ™â—Œpath(
    âŠ™âŠ™.               # always retain matrix at bottom of stack
    âŠƒ(âŠ¡âŠ™â‹…âˆ˜|+NÂ¤|Â¤â–³â‹…â‹…âˆ˜) # crop neis shape ? curr goal matrix
    âŠ™(â–½â¤šâ‰¡ğŸ°)           # crop withinBoundsNeis ? crop neis shape
    âŠƒ(â–½=âŠ™â¤šâŠ¡)          # validNeis ? crop withinBoundsNeis matrix
  )(â‰
  )
)

# âŠšâŠ¸âŒ•@C . âŠœâˆ˜âŠ¸â‰ @\n &fras"example_1a.txt"
âŠšâŠ¸âŒ•@X . âŠœâˆ˜âŠ¸â‰ @\n &fras"example_1b.txt"

â§…â‰¤ 2

â¤šâ‰¡(âŠƒâ§»â–¡PathsBetweenCoordPair) âŠ™Â¤

# ok, nu har jag fÃ¥tt fram vilka crops som hÃ¤nger ihop.
# hur anvÃ¤nder jag det fÃ¶r att fÃ¥ fram vilka regioner som finns?
# jag mÃ¥ste pÃ¥ nÃ¥t sÃ¤tt titta pÃ¥ alla paths samtidigt fÃ¶r att tÃ¤cka upp alla rutor
# det Ã¤r vÃ¤l iofs inte nÃ¥t problem, bara att slÃ¥ ihop alla patharrayerna
# men VILKA Ã¤r det jag ska slÃ¥ ihop?

# parvÃ¤gar som delar nÃ¥gon enda koordinat kan slÃ¥s ihop

# gruppera koordinatparen baserat pÃ¥ lÃ¤gsta koordinaten.
# slÃ¥ ihop alla vÃ¤gar som hittades.
# dedup pÃ¥ dessa sammanslagna borde ge alla regioner.
