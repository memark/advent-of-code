# https://adventofcode.com/2024/day/22

# uiua v0.15.0-dev.1
# Experimental!

# a XOR b = (a OR b) - (a AND b)
ğŸ™… â† Â°â‹¯-â¬š0âŠƒÃ—âˆ¨âˆ©â‹¯
â”Œâ”€â•´ğŸ§ª
  â¤â¤™â‰ 7 ğŸ™… 4 3
  â¤â¤™â‰ 12 ğŸ™… 10 6
â””â”€â•´

ğŸ¤ â† ğŸ™…
â¤â¤™â‰ 37 ğŸ¤ 42 15

âœ‚ï¸ â† â—¿â‚â‚†â‚‡â‚‡â‚‡â‚‚â‚â‚†
â¤â¤™â‰ 16113920 âœ‚ï¸ 100000000

ğŸ¥‡ â† âœ‚ï¸ğŸ¤âŠ¸Ã—â‚†â‚„
ğŸ¥ˆ â† âœ‚ï¸ğŸ¤âŒŠâŠ¸Ã·â‚ƒâ‚‚
ğŸ¥‰ â† âœ‚ï¸ğŸ¤âŠ¸Ã—â‚‚â‚€â‚„â‚ˆ

ğŸ– â† ğŸ¥‰ğŸ¥ˆğŸ¥‡

â¤â¤™â‰ 8685429 â¥â‚‚â‚€â‚€â‚€ğŸ– 1
â¤â¤™â‰ 4700978 â¥â‚‚â‚€â‚€â‚€ğŸ– 10
â¤â¤™â‰ 15273692 â¥â‚‚â‚€â‚€â‚€ğŸ– 100
â¤â¤™â‰ 8667524 â¥â‚‚â‚€â‚€â‚€ğŸ– 2024

ğŸª â† /+waitâ‰¡poolâ¥â‚‚â‚€â‚€â‚€ğŸ– âŠœâ‹•âŠ¸â‰ @\n
â”Œâ”€â•´ğŸ§ª
  â¤â¤™â‰ 37327623 ğŸª &fras"example_1a.txt"
  #   â¤â¤™â‰ 16299144133 ğŸª &fras"input.txt"
â””â”€â•´

# &fras"example_1a.txt"
# âŠœâ‹•âŠ¸â‰ @\n
# 123
# ?â‚â‡Œ[â¥âŠ¸ğŸ–9] # numbers
# ?â‚â‰¡â—¿â‚â‚€    # prices
# ?â‚âŠ¸â§ˆ-     # changes
# ?â‚âŠ¸â§ˆâˆ˜4    # sequences

# âŠ¸(â‰¡/âˆ¨â¦·) [Â¯1 Â¯1 0 2]

# ta fram alla vÃ¤rdena i egna arrayer enligt ovan
# nÃ¤r det Ã¤r flera starttal, fÃ¥r de vÃ¤l ligga som subarrayer
# bÃ¤ttre att ha en viss sorts vÃ¤rden i en egen array,
# och dela upp resp array i subarrays baserat pÃ¥ starttal

# ta fram alla mÃ¶jliga sekvenser (finns fÃ¶r minst ett starttal)
# slÃ¥ ihop fÃ¶r alla starttal
# glÃ¶m inte att ta dedup pÃ¥ dessa

# gÃ¥ igenom sekvenserna en efter en,
# hitta matchningar,
# rÃ¤kna ut score,
# summera

# sequences changes prices ? initialNumber
ProcessOneInitial â† memo(
  â‡Œ[â¥âŠ¸ğŸ–2000]
  â‰¡â—¿â‚â‚€ # prices
  âŠ¸â§ˆ-  # changes
  âŠ¸â§ˆâˆ˜4 # sequences
)

# ProcessOneInitial 123

# bananas ? sequence changes prices
EvaluateSequence â† memo(
  âŒ•
  â‰¡â†»â‚‹â‚„
  â‰¡(â–¡âŠš)
  â‰¡(â¨¬(0|âŠ¡âŠ¢) Â±âŠ¸â§» Â°â–¡)
)

# &fras"example_2a.txt"
&fras"input.txt"
âŠœâ‹•âŠ¸â‰ @\n
â‰¡(&pf@. ProcessOneInitial)
â—´â†â™­â‚‹â‚
dumpâ–³
âŠ™Â¤âŠ™âŠ™Â¤
waitâ‰¡pool(&pf@. EvaluateSequence)
â‰¡/+
/â†¥
# 1896, correct
