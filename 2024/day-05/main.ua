# https://adventofcode.com/2024/day/5

# uiua 0.15.0-dev.1
# Experimental!

UpdateMap â† (
  âŠ™âŠƒ(â¬š(â–¡[])get|âŠ™âˆ˜):
  insert:âœ(Â°â–¡:)âŠ‚
)

# map $ rules
ğŸ—º â† âˆ§(UpdateMapÂ°âŠŸâ‚‚) :[]

# updates rules $ data
ğŸ—„ â† (
  Â°/$"_\n\n_"
  âšÂ°/$"_\n_"
  âˆ©Â°â–¡:Â°âŠŸ
  âŠ“(â‰¡(âšâŠœâ‹•âŠ¸â‰ @,) â†˜Â¯1|ğŸ—ºâ‰¡(â—‡âŠœâ‹•âŠ¸â‰ @|))
)

# bool $ update rules
IsCorrectlyOrdered â† (
  # fÃ¶r varje update
  # - try get i rules
  # - fÃ¶r varje i rules
  #   - jÃ¤mfÃ¶r mot kvarvarande updates
  â‰¡âŒŸâ—‡(/âˆ¨â—‡âˆŠ: â¬š[]get âŠ™: Â°âŠ‚ â‡Œ) â§…â–¡
  Â¬/âˆ¨
)

# answer $ updates rules
ğŸª â† (
  â–½â¤šâ‰¡âŒŸâ—‡IsCorrectlyOrdered
  â‰¡â—‡(âŠ¡âŒŠÃ·2âŠ¸â§») # pick out the middle number
  /+
)
â”Œâ”€â•´ğŸ§ª
  â¤â¤™â‰ 143 ğŸª ğŸ—„ &fras "example.txt"
  # â¤â¤™â‰ 6498 ğŸª ğŸ—„ &fras "input.txt"
â””â”€â•´

? ğŸ—„ &fras "example.txt"
? $incorrect â–½Â¬â¤šâ‰¡âŒŸâ—‡IsCorrectlyOrdered âŠ™.
# âŠ¸â‰¡&p
# Â¤âŠ¡â‚
# â‰¡âŒŸ(âŠ™â—Œ?â‡ŒÂ°â–¡)

# kan man gÃ¶ra nÃ¥t slags sortalgo?
# sÃ¥ fort jag hittar ett par som ingÃ¥r i en regel,
# och har fel ordning,
# byta plats pÃ¥ dem?

# byta plats
# âœ(â–½0_1_0_1)â‡Œ 1_2_3_4

# man kan antingen hitta fÃ¶rsta paret som inte funkar,
# eller hitta alla par och sedan bara ta det fÃ¶rsta

# det finns inga dubletter inom en update,
# dvs har jag vÃ¤rdet kan jag hitta dess index

# 61, 13, 29 becomes 61, 29, 13

# â‰¡âŒŸâ—‡(â—‡âˆŠ?: â¬š[]get ? Â°â–¡ âŠ™: Â°âŠ‚ â‡Œ ? Â°â–¡ ?) ? â§…â–¡ âŠ¢

# candidates $ update rules
GetCandidates â† (
  ?
  Â°â–¡
  â‰¡âŒŸâ—‡(âˆ©â–¡ âŠ™(â–½âŠ¸âˆŠ) âŠ™Â°â–¡ âŠ™âŠ™: âŠ™: â— â¬š[]get âŠ™: Â°âŠ‚ â‡Œ Â°â–¡) â§…â–¡
  ?
  âŠ™âŠ™â—Œ
  ?
  âŠŸ
  â‰
  ?
  â–½âŠ¸â‰¡(Â¬â‰â–¡[] âŠ£)
  ?
)

â‰¡âŒŸGetCandidates Â¤âŠ¡â‚

# ?
# $candidates â‰¡âŒŸ(
#   ?
#   Â°â–¡
#   â‡Œ
#   Â°âŠ‚
#   â—¡ğ„get

#   Â°â–¡
#   â—¡ğ„âˆŠ
#   âŠ™â—Œ
#   ğ„âŒŸâ–½

#   # kan inte ta first rakt av utifall den Ã¤r tom
#   â¨¬(â–¡[]|â–¡âŠ¢) >â‚€âŠ¸â§»
#   âŠ™â–¡
#   âŠ‚
# )

# â–½âŠ¸â‰¡(Â¬â‰â–¡[] âŠ¢) # Ã¤r det tom array eller en match?
# â‰¡Â°â–¡âŠ¢ # ta fÃ¶rsta
# => 29 13, dessa tvÃ¥ ska byta plats, sedan gÃ¶ra om det igen

# hitta alla par som inte Ã¤r i rÃ¤tt ordning Ã¤r det jag vill gÃ¶ra
# det borde ju vara ungefÃ¤r samma som det jag redan gÃ¶r
#   â‰¡âŒŸâ—‡(/âˆ¨â—‡âˆŠ: â¬š[]get âŠ™: Â°âŠ‚ â‡Œ) â§…â–¡

# kanske Ã¤r det bÃ¤ttre att jobba med 0 istf box[]?
# det finns inga nollor i inputen, sÃ¥ det kan funka.
